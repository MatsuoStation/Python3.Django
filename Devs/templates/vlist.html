<!--
#//+------------------------------------------------------------------+
#//|                 VerysVeryInc.Python3.Django.Templates.vList.html |
#//|                  Copyright(c) 2018, VerysVery Inc. & Yoshio.Mr24 |
#//|                 https://github.com/MatsuoStation/Python3.Django/ |
#//|                                                 Since:2018.03.05 |
#//|                                Released under the Apache license |
#//|                       https://opensource.org/licenses/Apache-2.0 |
#//|      "VsV.Py3.Dj.TLs.vList.html - Ver.3.80.28 Update:2021.01.03" |
#//+------------------------------------------------------------------+
-->
{% extends "./base.html" %}

{% load sass_tags %}
{% load humanize %}
{% load static %}
{% load vfilter %}


{% block title %}vInvoice : 請求書{% endblock title %}
{% block content %}

    <main role="main" class="container">

      <div class="starter-template">
          <h1>vInvoice / 請求書</h1>

          <P>請求書作成</P>
          <form action="" method="POST" class="form-horizontal" role="form">
              {% csrf_token %}
              <!-- {{ form.as_p }} -->
              {{ form }}
              <input type="submit" name="送信">
          </form>
          <p><br>{{ names }} : {{ gid }} / {{ fPDF }}</p>
          <p>{{ dlb }} - {{ dla }}</p>
          <!--p>{{ fURL }}</p-->
          <p>

          <div class="pagination">
            <span class="step-links">
                {% if ivs.has_previous %}
                    <a href="?page=1&dl={{ deadlines }}">&laquo; Top&nbsp;</a>
                    <a href="?page={{ ivs.previous_page_number }}&dl={{ deadlines }}">|&nbsp;Prev&nbsp;|&nbsp;</a>&nbsp;
                {% endif %}
                <span class="current">
                    Page {{ ivs.number }} of {{ ivs.paginator.num_pages }}.
                </span>
                {% if ivs.has_next %}
                    &nbsp;<a href="?page={{ ivs.next_page_number }}&dl={{ deadlines }}">&nbsp;|&nbsp;Next&nbsp;|</a>
                    <a href="?page={{ ivs.paginator.num_pages }}&dl={{ deadlines }}">&nbsp;&nbsp;Last &raquo;</a>
                {% endif %}
            </span>
          </div>

          {% if dlms %}
              {% for dd in dds %}
                &nbsp;&nbsp;<a href="?dl={{ dd|date:"Y-m-d" }}"">{{ dd|date:"Y-m-d" }}</a>&nbsp;&nbsp;|
              {% endfor %}
          {% endif %}
          </p>

          <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <td>伝票枚数</td>
                    <td width="1"></td>
                    <td>前月ご請求額</td>
                    <td>当月ご入金額</td>
                    <td>手数料・調整</td>
                    <td>差引繰越額</td>
                    <td>当月お買上額</td>
                    <td width="1"></td>
                    <td>当月ご請求額</td>
                </tr>
            </thead>
            <thead>
                <tr>
                    <td></td>
                    <td width="1"></td>
                    <td>{{ before_values|intcomma }}</td>
                    <td>{{ incash_values|intcomma }}</td>
                    <td></td>
                    <td></td>
                    <td>{{ total_values|intcomma }}</td>
                    <td width="1"></td>
                    <td>{{ all_total_values|intcomma }}</td>
                </tr>
            </thead>
          </table>
          <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <td width="2">月</td>
                    <td width="2">日</td>
                    <td width="4">車番</td>
                    <td width="5">SCode</td>
                    <td>商品名</td>
                    <td>数量</td>
                    <td>単価</td>
                    <td>金額</td>
                    <td>税区分</td>
                    <!--td>車両別合計</td-->
                    <td>消費税</td>
                    <td>税込</td>
                    <td>備考</td>
                    <td>赤伝</td>
                    <td>時間</td>
                    <td>伝票番号</td>
                </tr>
            </thead>
            <thead>
                {% for iv in ivs %}
                <tr>
                    <!-- 月 - 日 - 車番 -->
                    <td>{{ iv.m_datetime.date.month }}</td>
                    <td>{{ iv.m_datetime.date.day }}</td>
                    <td>{{ iv.car_code }}</td>
                    <!-- 商品コード - 商品名 -->
                    <td>{{ iv.s_code  }}</td>
                    <td>{{ iv.s_code.h_name }}</td>
                    <!-- 数量 -->
                    <td>{{ iv.amount|divistion:100|floatformat:2 }}</td>
                    <!-- 単価 - 金額 -->
                    <td>{{ iv.s_code.uid|one_two:iv.g_code.uid|one_two:iv.amount|one_two:iv.value|one_two:iv.tax|one_two:iv.red_code|check_unit:iv.m_datetime|floatformat:2|intcomma }}</td>
                    <td>{{ iv.s_code.uid|one_two:iv.g_code.uid|one_two:iv.amount|one_two:iv.value|one_two:iv.tax|one_two:iv.red_code|check_value:iv.m_datetime|intcomma }}</td>
                    <!-- 税区分 - 消費税 - 税込 -->
                    <td>{{ iv.s_code.uid|s_tax:iv.tax }}</td>
                    <!--td>{{ iv.s_code.uid|s_tax:iv.tax }}</td-->
                    <td>{{ iv.s_code.uid|one_two:iv.g_code.uid|one_two:iv.amount|one_two:iv.value|one_two:iv.tax|one_two:iv.red_code|check_tax:iv.m_datetime|intcomma }}</td>
                    <td>{{ iv.s_code.uid|one_two:iv.g_code.uid|one_two:iv.amount|one_two:iv.value|one_two:iv.tax|one_two:iv.red_code|check_invalue:iv.m_datetime|intcomma }}</td>
                    <!-- 備考 - 赤伝 - 担当者 -->
                    <td><!-- {{ iv.g_code.uid }} --></td>
                    <!-- td>{{ iv.g_code.uid }} / {{ iv.g_code.name }}</td -->
                    <td>{{ iv.red_code }}</td>
                    <td>{{ iv.m_datetime|date:"H:i" }}</td>
                    <td>{{ iv.slip }}</td>
                </tr>
                {% endfor %}
            </thead>
          </table>

          <table class="table table-striped table-bordered">
          <thead>
                <tr>
                    <td><主要商品合計></td>
                    <td width="1"></td>
                    <td>課税売上高</td>
                    <td>{{ notax_values|intcomma }}</td>
                    <td width="1"></td>
                    <td>消費税額</td>
                    <td>{{ tax_values|intcomma }}</td>
                    <td width="1"></td>
                    <td>軽油税</td>
                    <td>{{ ktax_values|intcomma }}</td>
                    <td width="1"></td>
                </tr>
            </thead>
          </table>

          <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <td colspan="2">GP-1プラス</td>
                    <td colspan="2">レギュラー</td>
                    <td colspan="2">軽油</td>
                    <td colspan="2">灯油</td>
                    <td>その他金額</td>
                </tr>
                <tr>
                    <td>{{ high_amounts|floatformat:2|intcomma }}</td>
                    <td>{{ high_values|intcomma }}</td>
                    <td>{{ reg_amounts|floatformat:2|intcomma }}</td>
                    <td>{{ reg_values|intcomma }}</td>
                    <td>{{ keiyu_amounts|floatformat:2|intcomma }}</td>
                    <td>{{ keiyu_values|intcomma }}</td>
                    <td>{{ toyu_amounts|floatformat:2|intcomma }}</td>
                    <td>{{ toyu_values|intcomma }}</td>
                    <td>{{ nonoil_values|intcomma }}</td>
                </tr>
            </thead>
          </table>

          <div class="pagination">
            <span class="step-links">
                {% if ivs.has_previous %}
                    <a href="?page=1&dl={{ deadlines }}">&laquo; Top&nbsp;</a>
                    <a href="?page={{ ivs.previous_page_number }}&dl={{ deadlines }}">|&nbsp;Prev&nbsp;|&nbsp;</a>&nbsp;
                {% endif %}
                <span class="current">
                    Page {{ ivs.number }} of {{ ivs.paginator.num_pages }}.
                </span>
                {% if ivs.has_next %}
                    &nbsp;<a href="?page={{ ivs.next_page_number }}&dl={{ deadlines }}">&nbsp;|&nbsp;Next&nbsp;|</a>
                    <a href="?page={{ ivs.paginator.num_pages }}&dl={{ deadlines }}">&nbsp;&nbsp;Last &raquo;</a>
                {% endif %}
            </span>
          </div>

      </div>

    </main><!-- /.container -->

{% endblock content %}